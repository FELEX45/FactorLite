# FactorLite — пошаговый план реализации (рабочий)

Цель: сделать Android 2D timekiller в стиле survivor-like: **игрок двигается** (floating joystick), **персонаж авто-атакует ближайшего врага**, прогресс через **Level Up (только оружие/пассивки)**, **слоты 2 оружия + 2 пассивки**, **сундуки за валюту забега / дроп с элиток/боссов**.

Примечание по GitHub: коммиты делаем **только на ключевых вехах** (ниже помечены как **[GITHUB COMMIT]**).

---

## Этап 0 — База проекта и дисциплина разработки
- Выбрать генератор: `gdx-liftoff`
- Создать проект `FactorLite`
  - Kotlin + KTX
  - targets: Desktop + Android (Desktop нужен для быстрого цикла разработки)
- Настроить единый стиль ресурсов и папку `assets/`.
- Зафиксировать базовые константы (размеры мира, единицы измерения).

**[GITHUB COMMIT]**: `chore: bootstrap FactorLite project (libGDX + Kotlin + desktop/android targets)`

---

## Этап 1 — MVP “движение и ощущение управления”
Цель: пустая карта, игрок бегает и всё чувствуется “как надо”.

- Экран игры (GameScreen), базовый рендер (камера 2D).
- Floating joystick:
  - появление в месте касания
  - deadzone, clamp, плавность
- Движение игрока:
  - скорость, ускорение/торможение (по желанию)
  - коллизия со стенами (упрощённо) или границы арены
- HUD минимум: HP, lvl, валюта забега (пока может быть заглушкой).

**[GITHUB COMMIT]**: `feat: movement MVP (floating joystick + player movement + camera)`

---

## Этап 2 — MVP “враг + авто-таргет + авто-атака”
Цель: на экране есть враг, персонаж сам его атакует.

- Сущности:
  - Player
  - Enemy (1 тип)
  - Projectile (или hitscan, но лучше projectile для “ощущения”)
- Авто-таргет:
  - поиск ближайшего врага по dist^2
  - фиксация цели (не дёргать)
- Авто-оружие (стартовое врождённое):
  - кулдаун
  - урон
  - попадание/смерть врага

**[GITHUB COMMIT]**: `feat: auto-target and auto-attack (enemy + projectiles + damage)`

---

## Этап 3 — MVP “прогрессия: XP → LevelUp → выбор”
Цель: убиваешь → получаешь опыт → левелап → выбираешь улучшение.

- XP (дроп сферы/автоподбор можно позже; сначала просто “прибавить XP при убийстве”).
- LevelUp:
  - пауза/замедление
  - экран выбора “1 из 3”
- Слоты 2+2:
  - WeaponSlot A: врождённое оружие (всегда)
  - WeaponSlot B: дополнительное (появляется на левелапе)
  - PassiveSlot A/B: пассивки
- Пулы наград:
  - “новое оружие” только если слот свободен
  - иначе — апгрейды существующего / редкая замена
- Мини-набор контента:
  - 2 оружия (врождённое + одно дополнительное)
  - 2 пассивки (урон, скорость атаки)

**[GITHUB COMMIT]**: `feat: progression MVP (xp->levelup->choice, 2 weapons + 2 passives)`

---

## Этап 4 — Спавн, темп, смерть игрока
Цель: появляется много врагов, есть давление, можно проиграть.

- Спавнер волн:
  - частота растёт со временем
  - лимит живых врагов
- 3 типа врагов (минимум):
  - обычный
  - быстрый
  - танк
- Урон игроку при контакте/попадании.
- Game Over экран + повтор забега.

**[GITHUB COMMIT]**: `feat: run loop (spawns, enemy variety, player death, game over)`

---

## Этап 5 — Сундуки и предметы (второй канал усиления)
Цель: сундуки на карте дают “перки/предметы” с редкостями, не завися от статов.

- Валюта забега (gold):
  - падает с врагов
- Сундуки:
  - спавн точек интереса
  - открытие за gold
  - дроп 1–3 предметов
- Предметы:
  - триггеры “onHit/onKill/onDamageTaken”
  - редкости: common/rare/epic/legendary (шанс задаётся типом сундука/боссом)

**[GITHUB COMMIT]**: `feat: chests and items (run gold, rarities, item triggers)`

---

## Этап 6 — Уровневый режим с боссом (если это основной режим)
Цель: “таймер/цель → босс → следующий уровень”.

- Условия появления босса (таймер или “найти портал”).
- Босс (2–3 атаки, телеграф).
- Награда: сундук высокой редкости + переход уровня.

**[GITHUB COMMIT]**: `feat: boss and level progression`

---

## Этап 7 — Полировка (делает “как в маркете”)
- Фидбек:
  - звук, вибрация, вспышки, скриншейк, частицы
- Читаемость:
  - контраст, понятные индикаторы, минимальный мусор на экране
- Баланс:
  - темп XP, рост сложности, адекватные кулдауны
- Меню:
  - выбор персонажа (врождённое оружие + пассив “X% за уровень”, но вместо удачи используем шанс крита/иные статы)
  - экран разблокировок (персонажи/оружие/пассивки/предметы/косметика)

**[GITHUB COMMIT]**: `feat: meta screens and polish (characters/unlocks, effects, balance)`

---

## Этап 8 — Android релиз-подготовка
- Проверка управления на разных экранах/соотношениях сторон.
- Оптимизация:
  - пул объектов (пули/враги)
  - батчинг спрайтов
- Сборка AAB, подпись, минимальные настройки Play Console.

**[GITHUB COMMIT]**: `chore: android release build (aab signing, performance pass)`

